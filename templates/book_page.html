{% extends "base.html" %}

{% block styles %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/book_page.css') }}" class="css" type="text/css">

{% endblock %}

{% block content %}

    <section class="base-container hide">
        <div class="row">
            <div class="col s12 center-align">
                <h4>{{ book.book_name }}</h4>
            </div>
        </div>
        <div class="row">
            <div class="col s12 m4 l2">
              <div class="card">
                <div class="card-image">
                    {% if book.cover_img_name == "" %}
                    <img class="responsive-img" src="/static/images/nobookcover.jpg" alt="{{ book.book_name }}">
                    {% else %}
                    <img class="responsive-img" src="{{ url_for('get_cover_img', filename=book['cover_img_name'])}}" alt="{{ book.book_name }}">
                    {% endif %}
                </div>
                <div class="card-action">
                  <a href="{{ url_for('bookmark', book_id=book._id) }}">Add to Bookmarks</a>
                  <a href="{{ url_for('add_review_page', book_id=book._id) }}">Leave a review</a>
                </div>
              </div>
            </div>
            <div class="col s12 m8 l6">
                <div class="card-panel grey lighten-3">
                    <h6>Synopsis</h6>
                    <p class="">
                        {{ book.synopsis }}
                    </p>
                </div>
                {% for user_reviews in book.reviews %}
                <div class="card-panel grey lighten-3">
                    <h6>{{ user_reviews.user }}'s review on {{ book.book_name }}</h6>
                    <p>
                        {{ user_reviews.review }}
                    </p>
                </div>
                {% endfor %}
            </div>
            <div class="col s12 l4">
                <div class="card-panel grey lighten-3">
                    <h6>Book Information</h6>
                    <p class="">
                        ISBN: {{ book.isbn }}<br>
                        Publication Date: {{ book.published_date }}<br>
                        Author(s): {{ book.author }} <br>
                        Publisher: {{ book.publisher }}<br>
                        Genres: 
                        {% for genre in genres %}
                            {% if genre._id in book.genre %}
                                {{ genre.name }},
                            {% endif %}
                        {% endfor %}
                        <br>
                        Pages: {{ book.pages }} <br>
                    </p>
                </div>
            </div>
          </div>
    </section>


    <section class="base-container">
        <div class="row">
            <div class="col s12 m6">
                <div class="image-container">
                    {% if book.cover_img_name == "" %}
                    <img src="/static/images/nobookcover.jpg" alt="{{ book.book_name }}">
                    {% else %}
                    <img src="{{ url_for('get_cover_img', filename=book['cover_img_name'])}}" alt="{{ book.book_name }}">
                    {% endif %}
                </div>
            </div>
            <div class="col s12 m6">
                <div class="card">
                    <div class="card-content">
                        <div class="card-title">
                            <h4>{{ book.book_name }}</h4>
                            <p>By {{ book.author }}</p>
                        </div>
                        <a class="btn-floating btn-large halfway-fab waves-effect waves-light red"><i class="material-icons">bookmark</i></a>
                    </div>
                </div>
                <div class="store-link card">
                    <a href="#" class="btn waves-effect waves"><i class="material-icons right">local_shipping</i>Store Link</a>
                </div>
            </div>
        </div>
    </section>
{% endblock %}